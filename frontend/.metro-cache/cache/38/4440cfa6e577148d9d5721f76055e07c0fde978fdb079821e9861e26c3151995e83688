{"dependencies":[{"name":"expo-image-manipulator","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"jSCgza62Lmd+veZCOu0xCYv/BW8=","exportNames":["*"],"imports":1}},{"name":"expo-image-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":60},"end":{"line":2,"column":49,"index":109}}],"key":"XQFgv2+WadF9xV+S67CI6D8lClA=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.pickAndCompressImage = pickAndCompressImage;\n  exports.compressImage = compressImage;\n  exports.pickMenuItemImage = pickMenuItemImage;\n  exports.pickRestaurantImage = pickRestaurantImage;\n  exports.getBase64Size = getBase64Size;\n  exports.formatFileSize = formatFileSize;\n  var _expoImageManipulator = require(_dependencyMap[0], \"expo-image-manipulator\");\n  var ImageManipulator = _interopNamespace(_expoImageManipulator);\n  var _expoImagePicker = require(_dependencyMap[1], \"expo-image-picker\");\n  var ImagePicker = _interopNamespace(_expoImagePicker);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  /**\n   * Pick and compress an image from the device gallery\n   */\n  async function pickAndCompressImage(options = {}) {\n    const {\n      aspect = [1, 1],\n      quality = 0.8,\n      maxWidth = 800,\n      maxHeight = 800,\n      compress = 0.7\n    } = options;\n    try {\n      // Request permission\n      const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (!permissionResult.granted) {\n        Alert.default.alert('تنبيه', 'يجب السماح بالوصول للصور لتتمكن من رفع صورة');\n        return null;\n      }\n\n      // Pick image\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect,\n        quality\n      });\n      if (result.canceled || !result.assets[0]) {\n        return null;\n      }\n      const pickedImage = result.assets[0];\n\n      // Compress and resize the image\n      const manipulatedImage = await compressImage(pickedImage.uri, {\n        maxWidth,\n        maxHeight,\n        compress\n      });\n      return manipulatedImage;\n    } catch (error) {\n      console.error('Error picking image:', error);\n      Alert.default.alert('خطأ', 'فشل في اختيار الصورة');\n      return null;\n    }\n  }\n\n  /**\n   * Compress an existing image\n   */\n  async function compressImage(uri, options = {}) {\n    const {\n      maxWidth = 800,\n      maxHeight = 800,\n      compress = 0.7,\n      format = ImageManipulator.SaveFormat.JPEG\n    } = options;\n    try {\n      // First, get the image dimensions\n      const actions = [];\n\n      // Resize if needed\n      actions.push({\n        resize: {\n          width: maxWidth,\n          height: maxHeight\n        }\n      });\n      const manipulatedImage = await ImageManipulator.manipulateAsync(uri, actions, {\n        compress,\n        format,\n        base64: true\n      });\n      return {\n        uri: manipulatedImage.uri,\n        width: manipulatedImage.width,\n        height: manipulatedImage.height,\n        base64: manipulatedImage.base64 ? `data:image/jpeg;base64,${manipulatedImage.base64}` : undefined\n      };\n    } catch (error) {\n      console.error('Error compressing image:', error);\n      // Return original if compression fails\n      return {\n        uri,\n        width: 0,\n        height: 0\n      };\n    }\n  }\n\n  /**\n   * Pick image for menu items (square aspect ratio)\n   */\n  async function pickMenuItemImage() {\n    const result = await pickAndCompressImage({\n      aspect: [1, 1],\n      maxWidth: 600,\n      maxHeight: 600,\n      compress: 0.5\n    });\n    return result?.base64 || result?.uri || null;\n  }\n\n  /**\n   * Pick image for restaurant cover (wide aspect ratio)\n   */\n  async function pickRestaurantImage() {\n    const result = await pickAndCompressImage({\n      aspect: [16, 9],\n      maxWidth: 1200,\n      maxHeight: 675,\n      compress: 0.5\n    });\n    return result?.base64 || result?.uri || null;\n  }\n\n  /**\n   * Get estimated file size from base64 string\n   */\n  function getBase64Size(base64) {\n    // Remove data URL prefix if exists\n    const base64Data = base64.replace(/^data:image\\/\\w+;base64,/, '');\n    // Calculate approximate size in bytes\n    const sizeInBytes = base64Data.length * 3 / 4;\n    return sizeInBytes;\n  }\n\n  /**\n   * Format file size for display\n   */\n  function formatFileSize(bytes) {\n    if (bytes < 1024) {\n      return `${bytes} B`;\n    } else if (bytes < 1024 * 1024) {\n      return `${(bytes / 1024).toFixed(1)} KB`;\n    } else {\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    }\n  }\n});","lineCount":176,"map":[[27,2,23,0,"exports"],[27,9,23,0],[27,10,23,0,"pickAndCompressImage"],[27,30,23,0],[27,33,23,0,"pickAndCompressImage"],[27,53,23,0],[28,2,75,0,"exports"],[28,9,75,0],[28,10,75,0,"compressImage"],[28,23,75,0],[28,26,75,0,"compressImage"],[28,39,75,0],[29,2,129,0,"exports"],[29,9,129,0],[29,10,129,0,"pickMenuItemImage"],[29,27,129,0],[29,30,129,0,"pickMenuItemImage"],[29,47,129,0],[30,2,143,0,"exports"],[30,9,143,0],[30,10,143,0,"pickRestaurantImage"],[30,29,143,0],[30,32,143,0,"pickRestaurantImage"],[30,51,143,0],[31,2,157,0,"exports"],[31,9,157,0],[31,10,157,0,"getBase64Size"],[31,23,157,0],[31,26,157,0,"getBase64Size"],[31,39,157,0],[32,2,168,0,"exports"],[32,9,168,0],[32,10,168,0,"formatFileSize"],[32,24,168,0],[32,27,168,0,"formatFileSize"],[32,41,168,0],[33,2,1,0],[33,6,1,0,"_expoImageManipulator"],[33,27,1,0],[33,30,1,0,"require"],[33,37,1,0],[33,38,1,0,"_dependencyMap"],[33,52,1,0],[34,2,1,0],[34,6,1,0,"ImageManipulator"],[34,22,1,0],[34,25,1,0,"_interopNamespace"],[34,42,1,0],[34,43,1,0,"_expoImageManipulator"],[34,64,1,0],[35,2,2,0],[35,6,2,0,"_expoImagePicker"],[35,22,2,0],[35,25,2,0,"require"],[35,32,2,0],[35,33,2,0,"_dependencyMap"],[35,47,2,0],[36,2,2,0],[36,6,2,0,"ImagePicker"],[36,17,2,0],[36,20,2,0,"_interopNamespace"],[36,37,2,0],[36,38,2,0,"_expoImagePicker"],[36,54,2,0],[37,2,2,49],[37,6,2,49,"_reactNativeWebDistExportsAlert"],[37,37,2,49],[37,40,2,49,"require"],[37,47,2,49],[37,48,2,49,"_dependencyMap"],[37,62,2,49],[38,2,2,49],[38,6,2,49,"Alert"],[38,11,2,49],[38,14,2,49,"_interopDefault"],[38,29,2,49],[38,30,2,49,"_reactNativeWebDistExportsAlert"],[38,61,2,49],[39,2,20,0],[40,0,21,0],[41,0,22,0],[42,2,23,7],[42,17,23,22,"pickAndCompressImage"],[42,37,23,42,"pickAndCompressImage"],[42,38,24,2,"options"],[42,45,24,29],[42,48,24,32],[42,49,24,33],[42,50,24,34],[42,52,25,35],[43,4,26,2],[43,10,26,8],[44,6,27,4,"aspect"],[44,12,27,10],[44,15,27,13],[44,16,27,14],[44,17,27,15],[44,19,27,17],[44,20,27,18],[44,21,27,19],[45,6,28,4,"quality"],[45,13,28,11],[45,16,28,14],[45,19,28,17],[46,6,29,4,"maxWidth"],[46,14,29,12],[46,17,29,15],[46,20,29,18],[47,6,30,4,"maxHeight"],[47,15,30,13],[47,18,30,16],[47,21,30,19],[48,6,31,4,"compress"],[48,14,31,12],[48,17,31,15],[49,4,32,2],[49,5,32,3],[49,8,32,6,"options"],[49,15,32,13],[50,4,34,2],[50,8,34,6],[51,6,35,4],[52,6,36,4],[52,12,36,10,"permissionResult"],[52,28,36,26],[52,31,36,29],[52,37,36,35,"ImagePicker"],[52,48,36,46],[52,49,36,47,"requestMediaLibraryPermissionsAsync"],[52,84,36,82],[52,85,36,83],[52,86,36,84],[53,6,38,4],[53,10,38,8],[53,11,38,9,"permissionResult"],[53,27,38,25],[53,28,38,26,"granted"],[53,35,38,33],[53,37,38,35],[54,8,39,6,"Alert"],[54,13,39,11],[54,14,39,11,"default"],[54,21,39,11],[54,22,39,12,"alert"],[54,27,39,17],[54,28,39,18],[54,35,39,25],[54,37,39,27],[54,82,39,72],[54,83,39,73],[55,8,40,6],[55,15,40,13],[55,19,40,17],[56,6,41,4],[58,6,43,4],[59,6,44,4],[59,12,44,10,"result"],[59,18,44,16],[59,21,44,19],[59,27,44,25,"ImagePicker"],[59,38,44,36],[59,39,44,37,"launchImageLibraryAsync"],[59,62,44,60],[59,63,44,61],[60,8,45,6,"mediaTypes"],[60,18,45,16],[60,20,45,18,"ImagePicker"],[60,31,45,29],[60,32,45,30,"MediaTypeOptions"],[60,48,45,46],[60,49,45,47,"Images"],[60,55,45,53],[61,8,46,6,"allowsEditing"],[61,21,46,19],[61,23,46,21],[61,27,46,25],[62,8,47,6,"aspect"],[62,14,47,12],[63,8,48,6,"quality"],[64,6,49,4],[64,7,49,5],[64,8,49,6],[65,6,51,4],[65,10,51,8,"result"],[65,16,51,14],[65,17,51,15,"canceled"],[65,25,51,23],[65,29,51,27],[65,30,51,28,"result"],[65,36,51,34],[65,37,51,35,"assets"],[65,43,51,41],[65,44,51,42],[65,45,51,43],[65,46,51,44],[65,48,51,46],[66,8,52,6],[66,15,52,13],[66,19,52,17],[67,6,53,4],[68,6,55,4],[68,12,55,10,"pickedImage"],[68,23,55,21],[68,26,55,24,"result"],[68,32,55,30],[68,33,55,31,"assets"],[68,39,55,37],[68,40,55,38],[68,41,55,39],[68,42,55,40],[70,6,57,4],[71,6,58,4],[71,12,58,10,"manipulatedImage"],[71,28,58,26],[71,31,58,29],[71,37,58,35,"compressImage"],[71,50,58,48],[71,51,58,49,"pickedImage"],[71,62,58,60],[71,63,58,61,"uri"],[71,66,58,64],[71,68,58,66],[72,8,59,6,"maxWidth"],[72,16,59,14],[73,8,60,6,"maxHeight"],[73,17,60,15],[74,8,61,6,"compress"],[75,6,62,4],[75,7,62,5],[75,8,62,6],[76,6,64,4],[76,13,64,11,"manipulatedImage"],[76,29,64,27],[77,4,65,2],[77,5,65,3],[77,6,65,4],[77,13,65,11,"error"],[77,18,65,16],[77,20,65,18],[78,6,66,4,"console"],[78,13,66,11],[78,14,66,12,"error"],[78,19,66,17],[78,20,66,18],[78,42,66,40],[78,44,66,42,"error"],[78,49,66,47],[78,50,66,48],[79,6,67,4,"Alert"],[79,11,67,9],[79,12,67,9,"default"],[79,19,67,9],[79,20,67,10,"alert"],[79,25,67,15],[79,26,67,16],[79,31,67,21],[79,33,67,23],[79,55,67,45],[79,56,67,46],[80,6,68,4],[80,13,68,11],[80,17,68,15],[81,4,69,2],[82,2,70,0],[84,2,72,0],[85,0,73,0],[86,0,74,0],[87,2,75,7],[87,17,75,22,"compressImage"],[87,30,75,35,"compressImage"],[87,31,76,2,"uri"],[87,34,76,13],[87,36,77,2,"options"],[87,43,82,3],[87,46,82,6],[87,47,82,7],[87,48,82,8],[87,50,83,28],[88,4,84,2],[88,10,84,8],[89,6,85,4,"maxWidth"],[89,14,85,12],[89,17,85,15],[89,20,85,18],[90,6,86,4,"maxHeight"],[90,15,86,13],[90,18,86,16],[90,21,86,19],[91,6,87,4,"compress"],[91,14,87,12],[91,17,87,15],[91,20,87,18],[92,6,88,4,"format"],[92,12,88,10],[92,15,88,13,"ImageManipulator"],[92,31,88,29],[92,32,88,30,"SaveFormat"],[92,42,88,40],[92,43,88,41,"JPEG"],[93,4,89,2],[93,5,89,3],[93,8,89,6,"options"],[93,15,89,13],[94,4,91,2],[94,8,91,6],[95,6,92,4],[96,6,93,4],[96,12,93,10,"actions"],[96,19,93,44],[96,22,93,47],[96,24,93,49],[98,6,95,4],[99,6,96,4,"actions"],[99,13,96,11],[99,14,96,12,"push"],[99,18,96,16],[99,19,96,17],[100,8,97,6,"resize"],[100,14,97,12],[100,16,97,14],[101,10,98,8,"width"],[101,15,98,13],[101,17,98,15,"maxWidth"],[101,25,98,23],[102,10,99,8,"height"],[102,16,99,14],[102,18,99,16,"maxHeight"],[103,8,100,6],[104,6,101,4],[104,7,101,5],[104,8,101,6],[105,6,103,4],[105,12,103,10,"manipulatedImage"],[105,28,103,26],[105,31,103,29],[105,37,103,35,"ImageManipulator"],[105,53,103,51],[105,54,103,52,"manipulateAsync"],[105,69,103,67],[105,70,104,6,"uri"],[105,73,104,9],[105,75,105,6,"actions"],[105,82,105,13],[105,84,106,6],[106,8,107,8,"compress"],[106,16,107,16],[107,8,108,8,"format"],[107,14,108,14],[108,8,109,8,"base64"],[108,14,109,14],[108,16,109,16],[109,6,110,6],[109,7,111,4],[109,8,111,5],[110,6,113,4],[110,13,113,11],[111,8,114,6,"uri"],[111,11,114,9],[111,13,114,11,"manipulatedImage"],[111,29,114,27],[111,30,114,28,"uri"],[111,33,114,31],[112,8,115,6,"width"],[112,13,115,11],[112,15,115,13,"manipulatedImage"],[112,31,115,29],[112,32,115,30,"width"],[112,37,115,35],[113,8,116,6,"height"],[113,14,116,12],[113,16,116,14,"manipulatedImage"],[113,32,116,30],[113,33,116,31,"height"],[113,39,116,37],[114,8,117,6,"base64"],[114,14,117,12],[114,16,117,14,"manipulatedImage"],[114,32,117,30],[114,33,117,31,"base64"],[114,39,117,37],[114,42,117,40],[114,68,117,66,"manipulatedImage"],[114,84,117,82],[114,85,117,83,"base64"],[114,91,117,89],[114,93,117,91],[114,96,117,94,"undefined"],[115,6,118,4],[115,7,118,5],[116,4,119,2],[116,5,119,3],[116,6,119,4],[116,13,119,11,"error"],[116,18,119,16],[116,20,119,18],[117,6,120,4,"console"],[117,13,120,11],[117,14,120,12,"error"],[117,19,120,17],[117,20,120,18],[117,46,120,44],[117,48,120,46,"error"],[117,53,120,51],[117,54,120,52],[118,6,121,4],[119,6,122,4],[119,13,122,11],[120,8,122,13,"uri"],[120,11,122,16],[121,8,122,18,"width"],[121,13,122,23],[121,15,122,25],[121,16,122,26],[122,8,122,28,"height"],[122,14,122,34],[122,16,122,36],[123,6,122,38],[123,7,122,39],[124,4,123,2],[125,2,124,0],[127,2,126,0],[128,0,127,0],[129,0,128,0],[130,2,129,7],[130,17,129,22,"pickMenuItemImage"],[130,34,129,39,"pickMenuItemImage"],[130,35,129,39],[130,37,129,66],[131,4,130,2],[131,10,130,8,"result"],[131,16,130,14],[131,19,130,17],[131,25,130,23,"pickAndCompressImage"],[131,45,130,43],[131,46,130,44],[132,6,131,4,"aspect"],[132,12,131,10],[132,14,131,12],[132,15,131,13],[132,16,131,14],[132,18,131,16],[132,19,131,17],[132,20,131,18],[133,6,132,4,"maxWidth"],[133,14,132,12],[133,16,132,14],[133,19,132,17],[134,6,133,4,"maxHeight"],[134,15,133,13],[134,17,133,15],[134,20,133,18],[135,6,134,4,"compress"],[135,14,134,12],[135,16,134,14],[136,4,135,2],[136,5,135,3],[136,6,135,4],[137,4,137,2],[137,11,137,9,"result"],[137,17,137,15],[137,19,137,17,"base64"],[137,25,137,23],[137,29,137,27,"result"],[137,35,137,33],[137,37,137,35,"uri"],[137,40,137,38],[137,44,137,42],[137,48,137,46],[138,2,138,0],[140,2,140,0],[141,0,141,0],[142,0,142,0],[143,2,143,7],[143,17,143,22,"pickRestaurantImage"],[143,36,143,41,"pickRestaurantImage"],[143,37,143,41],[143,39,143,68],[144,4,144,2],[144,10,144,8,"result"],[144,16,144,14],[144,19,144,17],[144,25,144,23,"pickAndCompressImage"],[144,45,144,43],[144,46,144,44],[145,6,145,4,"aspect"],[145,12,145,10],[145,14,145,12],[145,15,145,13],[145,17,145,15],[145,19,145,17],[145,20,145,18],[145,21,145,19],[146,6,146,4,"maxWidth"],[146,14,146,12],[146,16,146,14],[146,20,146,18],[147,6,147,4,"maxHeight"],[147,15,147,13],[147,17,147,15],[147,20,147,18],[148,6,148,4,"compress"],[148,14,148,12],[148,16,148,14],[149,4,149,2],[149,5,149,3],[149,6,149,4],[150,4,151,2],[150,11,151,9,"result"],[150,17,151,15],[150,19,151,17,"base64"],[150,25,151,23],[150,29,151,27,"result"],[150,35,151,33],[150,37,151,35,"uri"],[150,40,151,38],[150,44,151,42],[150,48,151,46],[151,2,152,0],[153,2,154,0],[154,0,155,0],[155,0,156,0],[156,2,157,7],[156,11,157,16,"getBase64Size"],[156,24,157,29,"getBase64Size"],[156,25,157,30,"base64"],[156,31,157,44],[156,33,157,54],[157,4,158,2],[158,4,159,2],[158,10,159,8,"base64Data"],[158,20,159,18],[158,23,159,21,"base64"],[158,29,159,27],[158,30,159,28,"replace"],[158,37,159,35],[158,38,159,36],[158,64,159,62],[158,66,159,64],[158,68,159,66],[158,69,159,67],[159,4,160,2],[160,4,161,2],[160,10,161,8,"sizeInBytes"],[160,21,161,19],[160,24,161,23,"base64Data"],[160,34,161,33],[160,35,161,34,"length"],[160,41,161,40],[160,44,161,43],[160,45,161,44],[160,48,161,48],[160,49,161,49],[161,4,162,2],[161,11,162,9,"sizeInBytes"],[161,22,162,20],[162,2,163,0],[164,2,165,0],[165,0,166,0],[166,0,167,0],[167,2,168,7],[167,11,168,16,"formatFileSize"],[167,25,168,30,"formatFileSize"],[167,26,168,31,"bytes"],[167,31,168,44],[167,33,168,54],[168,4,169,2],[168,8,169,6,"bytes"],[168,13,169,11],[168,16,169,14],[168,20,169,18],[168,22,169,20],[169,6,170,4],[169,13,170,11],[169,16,170,14,"bytes"],[169,21,170,19],[169,25,170,23],[170,4,171,2],[170,5,171,3],[170,11,171,9],[170,15,171,13,"bytes"],[170,20,171,18],[170,23,171,21],[170,27,171,25],[170,30,171,28],[170,34,171,32],[170,36,171,34],[171,6,172,4],[171,13,172,11],[171,16,172,14],[171,17,172,15,"bytes"],[171,22,172,20],[171,25,172,23],[171,29,172,27],[171,31,172,29,"toFixed"],[171,38,172,36],[171,39,172,37],[171,40,172,38],[171,41,172,39],[171,46,172,44],[172,4,173,2],[172,5,173,3],[172,11,173,9],[173,6,174,4],[173,13,174,11],[173,16,174,14],[173,17,174,15,"bytes"],[173,22,174,20],[173,26,174,24],[173,30,174,28],[173,33,174,31],[173,37,174,35],[173,38,174,36],[173,40,174,38,"toFixed"],[173,47,174,45],[173,48,174,46],[173,49,174,47],[173,50,174,48],[173,55,174,53],[174,4,175,2],[175,2,176,0],[176,0,176,1],[176,3]],"functionMap":{"names":["<global>","pickAndCompressImage","compressImage","pickMenuItemImage","pickRestaurantImage","getBase64Size","formatFileSize"],"mappings":"AAA;OCsB;CD+C;OEK;CFiD;OGK;CHS;OIK;CJS;OKK;CLM;OMK;CNQ"},"hasCjsExports":false},"type":"js/module"}]}