{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":177},"end":{"line":11,"column":42,"index":219}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    isLoading: true,\n    isAuthenticated: false,\n    isGuest: false,\n    login: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (phone, password) {\n        var response = yield _servicesApi.authAPI.login(phone, password);\n        set({\n          user: response.user,\n          isAuthenticated: true,\n          isGuest: false\n        });\n        return response.user;\n      });\n      return function login(_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    register: function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (name, phone, password) {\n        var role = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'customer';\n        var response = yield _servicesApi.authAPI.register(name, phone, password, role);\n        set({\n          user: response.user,\n          isAuthenticated: true,\n          isGuest: false\n        });\n        return response.user;\n      });\n      return function register(_x3, _x4, _x5) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    logout: function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* () {\n        yield _servicesApi.authAPI.logout();\n        set({\n          user: null,\n          isAuthenticated: false,\n          isGuest: false\n        });\n      });\n      return function logout() {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    checkAuth: function () {\n      var _ref4 = (0, _asyncToGenerator.default)(function* () {\n        try {\n          var token = yield _servicesApi.authAPI.getToken();\n          if (token) {\n            var user = yield _servicesApi.authAPI.getMe();\n            set({\n              user,\n              isAuthenticated: true,\n              isLoading: false\n            });\n          } else {\n            set({\n              isLoading: false\n            });\n          }\n        } catch {\n          set({\n            user: null,\n            isAuthenticated: false,\n            isLoading: false\n          });\n        }\n      });\n      return function checkAuth() {\n        return _ref4.apply(this, arguments);\n      };\n    }(),\n    setGuestMode: value => {\n      set({\n        isGuest: value,\n        isLoading: false\n      });\n    }\n  }));\n});","lineCount":104,"map":[[12,2,25,0,"Object"],[12,8,25,0],[12,9,25,0,"defineProperty"],[12,23,25,0],[12,24,25,0,"exports"],[12,31,25,0],[13,4,25,0,"enumerable"],[13,14,25,0],[14,4,25,0,"get"],[14,7,25,0],[14,18,25,0,"get"],[14,19,25,0],[15,6,25,0],[15,13,25,0,"useAuthStore"],[15,25,25,0],[16,4,25,0],[17,2,25,0],[18,2,65,4],[18,6,65,4,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,65,4],[18,45,65,4,"require"],[18,52,65,4],[18,53,65,4,"_dependencyMap"],[18,67,65,4],[19,2,65,4],[19,6,65,4,"_asyncToGenerator"],[19,23,65,4],[19,26,65,4,"_interopDefault"],[19,41,65,4],[19,42,65,4,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,65,4],[20,2,1,0],[20,6,1,0,"_zustand"],[20,14,1,0],[20,17,1,0,"require"],[20,24,1,0],[20,25,1,0,"_dependencyMap"],[20,39,1,0],[21,2,11,0],[21,6,11,0,"_servicesApi"],[21,18,11,0],[21,21,11,0,"require"],[21,28,11,0],[21,29,11,0,"_dependencyMap"],[21,43,11,0],[22,2,25,7],[22,6,25,13,"useAuthStore"],[22,18,25,25],[22,21,25,28],[22,25,25,28,"create"],[22,33,25,34],[22,34,25,34,"create"],[22,40,25,34],[22,42,25,47,"set"],[22,45,25,50],[22,50,25,56],[23,4,26,2,"user"],[23,8,26,6],[23,10,26,8],[23,14,26,12],[24,4,27,2,"isLoading"],[24,13,27,11],[24,15,27,13],[24,19,27,17],[25,4,28,2,"isAuthenticated"],[25,19,28,17],[25,21,28,19],[25,26,28,24],[26,4,29,2,"isGuest"],[26,11,29,9],[26,13,29,11],[26,18,29,16],[27,4,31,2,"login"],[27,9,31,7],[28,6,31,7],[28,10,31,7,"_ref"],[28,14,31,7],[28,21,31,7,"_asyncToGenerator"],[28,38,31,7],[28,39,31,7,"default"],[28,46,31,7],[28,48,31,9],[28,59,31,16,"phone"],[28,64,31,29],[28,66,31,31,"password"],[28,74,31,47],[28,76,31,52],[29,8,32,4],[29,12,32,10,"response"],[29,20,32,18],[29,29,32,27,"authAPI"],[29,41,32,34],[29,42,32,34,"authAPI"],[29,49,32,34],[29,50,32,35,"login"],[29,55,32,40],[29,56,32,41,"phone"],[29,61,32,46],[29,63,32,48,"password"],[29,71,32,56],[29,72,32,57],[30,8,33,4,"set"],[30,11,33,7],[30,12,33,8],[31,10,33,10,"user"],[31,14,33,14],[31,16,33,16,"response"],[31,24,33,24],[31,25,33,25,"user"],[31,29,33,29],[32,10,33,31,"isAuthenticated"],[32,25,33,46],[32,27,33,48],[32,31,33,52],[33,10,33,54,"isGuest"],[33,17,33,61],[33,19,33,63],[34,8,33,69],[34,9,33,70],[34,10,33,71],[35,8,34,4],[35,15,34,11,"response"],[35,23,34,19],[35,24,34,20,"user"],[35,28,34,24],[36,6,35,2],[36,7,35,3],[37,6,35,3],[37,22,31,2,"login"],[37,27,31,7,"login"],[37,28,31,7,"_x"],[37,30,31,7],[37,32,31,7,"_x2"],[37,35,31,7],[38,8,31,7],[38,15,31,7,"_ref"],[38,19,31,7],[38,20,31,7,"apply"],[38,25,31,7],[38,32,31,7,"arguments"],[38,41,31,7],[39,6,31,7],[40,4,31,7],[40,7,35,3],[41,4,37,2,"register"],[41,12,37,10],[42,6,37,10],[42,10,37,10,"_ref2"],[42,15,37,10],[42,22,37,10,"_asyncToGenerator"],[42,39,37,10],[42,40,37,10,"default"],[42,47,37,10],[42,49,37,12],[42,60,37,19,"name"],[42,64,37,31],[42,66,37,33,"phone"],[42,71,37,46],[42,73,37,48,"password"],[42,81,37,64],[42,83,37,96],[43,8,37,96],[43,12,37,66,"role"],[43,16,37,78],[43,19,37,78,"arguments"],[43,28,37,78],[43,29,37,78,"length"],[43,35,37,78],[43,43,37,78,"arguments"],[43,52,37,78],[43,60,37,78,"undefined"],[43,69,37,78],[43,72,37,78,"arguments"],[43,81,37,78],[43,87,37,81],[43,97,37,91],[44,8,38,4],[44,12,38,10,"response"],[44,20,38,18],[44,29,38,27,"authAPI"],[44,41,38,34],[44,42,38,34,"authAPI"],[44,49,38,34],[44,50,38,35,"register"],[44,58,38,43],[44,59,38,44,"name"],[44,63,38,48],[44,65,38,50,"phone"],[44,70,38,55],[44,72,38,57,"password"],[44,80,38,65],[44,82,38,67,"role"],[44,86,38,71],[44,87,38,72],[45,8,39,4,"set"],[45,11,39,7],[45,12,39,8],[46,10,39,10,"user"],[46,14,39,14],[46,16,39,16,"response"],[46,24,39,24],[46,25,39,25,"user"],[46,29,39,29],[47,10,39,31,"isAuthenticated"],[47,25,39,46],[47,27,39,48],[47,31,39,52],[48,10,39,54,"isGuest"],[48,17,39,61],[48,19,39,63],[49,8,39,69],[49,9,39,70],[49,10,39,71],[50,8,40,4],[50,15,40,11,"response"],[50,23,40,19],[50,24,40,20,"user"],[50,28,40,24],[51,6,41,2],[51,7,41,3],[52,6,41,3],[52,22,37,2,"register"],[52,30,37,10,"register"],[52,31,37,10,"_x3"],[52,34,37,10],[52,36,37,10,"_x4"],[52,39,37,10],[52,41,37,10,"_x5"],[52,44,37,10],[53,8,37,10],[53,15,37,10,"_ref2"],[53,20,37,10],[53,21,37,10,"apply"],[53,26,37,10],[53,33,37,10,"arguments"],[53,42,37,10],[54,6,37,10],[55,4,37,10],[55,7,41,3],[56,4,43,2,"logout"],[56,10,43,8],[57,6,43,8],[57,10,43,8,"_ref3"],[57,15,43,8],[57,22,43,8,"_asyncToGenerator"],[57,39,43,8],[57,40,43,8,"default"],[57,47,43,8],[57,49,43,10],[57,62,43,22],[58,8,44,4],[58,14,44,10,"authAPI"],[58,26,44,17],[58,27,44,17,"authAPI"],[58,34,44,17],[58,35,44,18,"logout"],[58,41,44,24],[58,42,44,25],[58,43,44,26],[59,8,45,4,"set"],[59,11,45,7],[59,12,45,8],[60,10,45,10,"user"],[60,14,45,14],[60,16,45,16],[60,20,45,20],[61,10,45,22,"isAuthenticated"],[61,25,45,37],[61,27,45,39],[61,32,45,44],[62,10,45,46,"isGuest"],[62,17,45,53],[62,19,45,55],[63,8,45,61],[63,9,45,62],[63,10,45,63],[64,6,46,2],[64,7,46,3],[65,6,46,3],[65,22,43,2,"logout"],[65,28,43,8,"logout"],[65,29,43,8],[66,8,43,8],[66,15,43,8,"_ref3"],[66,20,43,8],[66,21,43,8,"apply"],[66,26,43,8],[66,33,43,8,"arguments"],[66,42,43,8],[67,6,43,8],[68,4,43,8],[68,7,46,3],[69,4,48,2,"checkAuth"],[69,13,48,11],[70,6,48,11],[70,10,48,11,"_ref4"],[70,15,48,11],[70,22,48,11,"_asyncToGenerator"],[70,39,48,11],[70,40,48,11,"default"],[70,47,48,11],[70,49,48,13],[70,62,48,25],[71,8,49,4],[71,12,49,8],[72,10,50,6],[72,14,50,12,"token"],[72,19,50,17],[72,28,50,26,"authAPI"],[72,40,50,33],[72,41,50,33,"authAPI"],[72,48,50,33],[72,49,50,34,"getToken"],[72,57,50,42],[72,58,50,43],[72,59,50,44],[73,10,51,6],[73,14,51,10,"token"],[73,19,51,15],[73,21,51,17],[74,12,52,8],[74,16,52,14,"user"],[74,20,52,18],[74,29,52,27,"authAPI"],[74,41,52,34],[74,42,52,34,"authAPI"],[74,49,52,34],[74,50,52,35,"getMe"],[74,55,52,40],[74,56,52,41],[74,57,52,42],[75,12,53,8,"set"],[75,15,53,11],[75,16,53,12],[76,14,53,14,"user"],[76,18,53,18],[77,14,53,20,"isAuthenticated"],[77,29,53,35],[77,31,53,37],[77,35,53,41],[78,14,53,43,"isLoading"],[78,23,53,52],[78,25,53,54],[79,12,53,60],[79,13,53,61],[79,14,53,62],[80,10,54,6],[80,11,54,7],[80,17,54,13],[81,12,55,8,"set"],[81,15,55,11],[81,16,55,12],[82,14,55,14,"isLoading"],[82,23,55,23],[82,25,55,25],[83,12,55,31],[83,13,55,32],[83,14,55,33],[84,10,56,6],[85,8,57,4],[85,9,57,5],[85,10,57,6],[85,16,57,12],[86,10,58,6,"set"],[86,13,58,9],[86,14,58,10],[87,12,58,12,"user"],[87,16,58,16],[87,18,58,18],[87,22,58,22],[88,12,58,24,"isAuthenticated"],[88,27,58,39],[88,29,58,41],[88,34,58,46],[89,12,58,48,"isLoading"],[89,21,58,57],[89,23,58,59],[90,10,58,65],[90,11,58,66],[90,12,58,67],[91,8,59,4],[92,6,60,2],[92,7,60,3],[93,6,60,3],[93,22,48,2,"checkAuth"],[93,31,48,11,"checkAuth"],[93,32,48,11],[94,8,48,11],[94,15,48,11,"_ref4"],[94,20,48,11],[94,21,48,11,"apply"],[94,26,48,11],[94,33,48,11,"arguments"],[94,42,48,11],[95,6,48,11],[96,4,48,11],[96,7,60,3],[97,4,62,2,"setGuestMode"],[97,16,62,14],[97,18,62,17,"value"],[97,23,62,31],[97,27,62,36],[98,6,63,4,"set"],[98,9,63,7],[98,10,63,8],[99,8,63,10,"isGuest"],[99,15,63,17],[99,17,63,19,"value"],[99,22,63,24],[100,8,63,26,"isLoading"],[100,17,63,35],[100,19,63,37],[101,6,63,43],[101,7,63,44],[101,8,63,45],[102,4,64,2],[103,2,65,0],[103,3,65,1],[103,4,65,2],[103,5,65,3],[104,0,65,4],[104,3]],"functionMap":{"names":["<global>","create$argument_0","login","register","logout","checkAuth","setGuestMode"],"mappings":"AAA;8CCwB;SCM;GDI;YEE;GFI;UGE;GHG;aIE;GJY;gBKE;GLE;EDC"},"hasCjsExports":false},"type":"js/module"}]}