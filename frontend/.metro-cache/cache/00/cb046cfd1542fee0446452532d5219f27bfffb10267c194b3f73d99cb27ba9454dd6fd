{"dependencies":[{"name":"expo-image-manipulator","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"jSCgza62Lmd+veZCOu0xCYv/BW8=","exportNames":["*"],"imports":1}},{"name":"expo-image-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":60},"end":{"line":2,"column":49,"index":109}}],"key":"XQFgv2+WadF9xV+S67CI6D8lClA=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.pickAndCompressImage = pickAndCompressImage;\n  exports.compressImage = compressImage;\n  exports.pickMenuItemImage = pickMenuItemImage;\n  exports.pickRestaurantImage = pickRestaurantImage;\n  exports.getBase64Size = getBase64Size;\n  exports.formatFileSize = formatFileSize;\n  var _expoImageManipulator = require(_dependencyMap[0], \"expo-image-manipulator\");\n  var ImageManipulator = _interopNamespace(_expoImageManipulator);\n  var _expoImagePicker = require(_dependencyMap[1], \"expo-image-picker\");\n  var ImagePicker = _interopNamespace(_expoImagePicker);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  /**\n   * Pick and compress an image from the device gallery\n   */\n  async function pickAndCompressImage(options = {}) {\n    const {\n      aspect = [1, 1],\n      quality = 0.8,\n      maxWidth = 800,\n      maxHeight = 800,\n      compress = 0.7\n    } = options;\n    try {\n      // Request permission\n      const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (!permissionResult.granted) {\n        Alert.default.alert('تنبيه', 'يجب السماح بالوصول للصور لتتمكن من رفع صورة');\n        return null;\n      }\n\n      // Pick image\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect,\n        quality\n      });\n      if (result.canceled || !result.assets[0]) {\n        return null;\n      }\n      const pickedImage = result.assets[0];\n\n      // Compress and resize the image\n      const manipulatedImage = await compressImage(pickedImage.uri, {\n        maxWidth,\n        maxHeight,\n        compress\n      });\n      return manipulatedImage;\n    } catch (error) {\n      console.error('Error picking image:', error);\n      Alert.default.alert('خطأ', 'فشل في اختيار الصورة');\n      return null;\n    }\n  }\n\n  /**\n   * Compress an existing image\n   */\n  async function compressImage(uri, options = {}) {\n    const {\n      maxWidth = 800,\n      maxHeight = 800,\n      compress = 0.7,\n      format = ImageManipulator.SaveFormat.JPEG\n    } = options;\n    try {\n      // First, get the image dimensions\n      const actions = [];\n\n      // Resize if needed\n      actions.push({\n        resize: {\n          width: maxWidth,\n          height: maxHeight\n        }\n      });\n      const manipulatedImage = await ImageManipulator.manipulateAsync(uri, actions, {\n        compress,\n        format,\n        base64: false\n      });\n      return {\n        uri: manipulatedImage.uri,\n        width: manipulatedImage.width,\n        height: manipulatedImage.height\n      };\n    } catch (error) {\n      console.error('Error compressing image:', error);\n      // Return original if compression fails\n      return {\n        uri,\n        width: 0,\n        height: 0\n      };\n    }\n  }\n\n  /**\n   * Pick image for menu items (square aspect ratio)\n   */\n  async function pickMenuItemImage() {\n    const result = await pickAndCompressImage({\n      aspect: [1, 1],\n      maxWidth: 600,\n      maxHeight: 600,\n      compress: 0.6\n    });\n    return result?.uri || null;\n  }\n\n  /**\n   * Pick image for restaurant cover (wide aspect ratio)\n   */\n  async function pickRestaurantImage() {\n    const result = await pickAndCompressImage({\n      aspect: [16, 9],\n      maxWidth: 1200,\n      maxHeight: 675,\n      compress: 0.7\n    });\n    return result?.uri || null;\n  }\n\n  /**\n   * Get estimated file size from base64 string\n   */\n  function getBase64Size(base64) {\n    // Remove data URL prefix if exists\n    const base64Data = base64.replace(/^data:image\\/\\w+;base64,/, '');\n    // Calculate approximate size in bytes\n    const sizeInBytes = base64Data.length * 3 / 4;\n    return sizeInBytes;\n  }\n\n  /**\n   * Format file size for display\n   */\n  function formatFileSize(bytes) {\n    if (bytes < 1024) {\n      return `${bytes} B`;\n    } else if (bytes < 1024 * 1024) {\n      return `${(bytes / 1024).toFixed(1)} KB`;\n    } else {\n      return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    }\n  }\n});","lineCount":175,"map":[[27,2,23,0,"exports"],[27,9,23,0],[27,10,23,0,"pickAndCompressImage"],[27,30,23,0],[27,33,23,0,"pickAndCompressImage"],[27,53,23,0],[28,2,75,0,"exports"],[28,9,75,0],[28,10,75,0,"compressImage"],[28,23,75,0],[28,26,75,0,"compressImage"],[28,39,75,0],[29,2,128,0,"exports"],[29,9,128,0],[29,10,128,0,"pickMenuItemImage"],[29,27,128,0],[29,30,128,0,"pickMenuItemImage"],[29,47,128,0],[30,2,142,0,"exports"],[30,9,142,0],[30,10,142,0,"pickRestaurantImage"],[30,29,142,0],[30,32,142,0,"pickRestaurantImage"],[30,51,142,0],[31,2,156,0,"exports"],[31,9,156,0],[31,10,156,0,"getBase64Size"],[31,23,156,0],[31,26,156,0,"getBase64Size"],[31,39,156,0],[32,2,167,0,"exports"],[32,9,167,0],[32,10,167,0,"formatFileSize"],[32,24,167,0],[32,27,167,0,"formatFileSize"],[32,41,167,0],[33,2,1,0],[33,6,1,0,"_expoImageManipulator"],[33,27,1,0],[33,30,1,0,"require"],[33,37,1,0],[33,38,1,0,"_dependencyMap"],[33,52,1,0],[34,2,1,0],[34,6,1,0,"ImageManipulator"],[34,22,1,0],[34,25,1,0,"_interopNamespace"],[34,42,1,0],[34,43,1,0,"_expoImageManipulator"],[34,64,1,0],[35,2,2,0],[35,6,2,0,"_expoImagePicker"],[35,22,2,0],[35,25,2,0,"require"],[35,32,2,0],[35,33,2,0,"_dependencyMap"],[35,47,2,0],[36,2,2,0],[36,6,2,0,"ImagePicker"],[36,17,2,0],[36,20,2,0,"_interopNamespace"],[36,37,2,0],[36,38,2,0,"_expoImagePicker"],[36,54,2,0],[37,2,2,49],[37,6,2,49,"_reactNativeWebDistExportsAlert"],[37,37,2,49],[37,40,2,49,"require"],[37,47,2,49],[37,48,2,49,"_dependencyMap"],[37,62,2,49],[38,2,2,49],[38,6,2,49,"Alert"],[38,11,2,49],[38,14,2,49,"_interopDefault"],[38,29,2,49],[38,30,2,49,"_reactNativeWebDistExportsAlert"],[38,61,2,49],[39,2,20,0],[40,0,21,0],[41,0,22,0],[42,2,23,7],[42,17,23,22,"pickAndCompressImage"],[42,37,23,42,"pickAndCompressImage"],[42,38,24,2,"options"],[42,45,24,29],[42,48,24,32],[42,49,24,33],[42,50,24,34],[42,52,25,35],[43,4,26,2],[43,10,26,8],[44,6,27,4,"aspect"],[44,12,27,10],[44,15,27,13],[44,16,27,14],[44,17,27,15],[44,19,27,17],[44,20,27,18],[44,21,27,19],[45,6,28,4,"quality"],[45,13,28,11],[45,16,28,14],[45,19,28,17],[46,6,29,4,"maxWidth"],[46,14,29,12],[46,17,29,15],[46,20,29,18],[47,6,30,4,"maxHeight"],[47,15,30,13],[47,18,30,16],[47,21,30,19],[48,6,31,4,"compress"],[48,14,31,12],[48,17,31,15],[49,4,32,2],[49,5,32,3],[49,8,32,6,"options"],[49,15,32,13],[50,4,34,2],[50,8,34,6],[51,6,35,4],[52,6,36,4],[52,12,36,10,"permissionResult"],[52,28,36,26],[52,31,36,29],[52,37,36,35,"ImagePicker"],[52,48,36,46],[52,49,36,47,"requestMediaLibraryPermissionsAsync"],[52,84,36,82],[52,85,36,83],[52,86,36,84],[53,6,38,4],[53,10,38,8],[53,11,38,9,"permissionResult"],[53,27,38,25],[53,28,38,26,"granted"],[53,35,38,33],[53,37,38,35],[54,8,39,6,"Alert"],[54,13,39,11],[54,14,39,11,"default"],[54,21,39,11],[54,22,39,12,"alert"],[54,27,39,17],[54,28,39,18],[54,35,39,25],[54,37,39,27],[54,82,39,72],[54,83,39,73],[55,8,40,6],[55,15,40,13],[55,19,40,17],[56,6,41,4],[58,6,43,4],[59,6,44,4],[59,12,44,10,"result"],[59,18,44,16],[59,21,44,19],[59,27,44,25,"ImagePicker"],[59,38,44,36],[59,39,44,37,"launchImageLibraryAsync"],[59,62,44,60],[59,63,44,61],[60,8,45,6,"mediaTypes"],[60,18,45,16],[60,20,45,18,"ImagePicker"],[60,31,45,29],[60,32,45,30,"MediaTypeOptions"],[60,48,45,46],[60,49,45,47,"Images"],[60,55,45,53],[61,8,46,6,"allowsEditing"],[61,21,46,19],[61,23,46,21],[61,27,46,25],[62,8,47,6,"aspect"],[62,14,47,12],[63,8,48,6,"quality"],[64,6,49,4],[64,7,49,5],[64,8,49,6],[65,6,51,4],[65,10,51,8,"result"],[65,16,51,14],[65,17,51,15,"canceled"],[65,25,51,23],[65,29,51,27],[65,30,51,28,"result"],[65,36,51,34],[65,37,51,35,"assets"],[65,43,51,41],[65,44,51,42],[65,45,51,43],[65,46,51,44],[65,48,51,46],[66,8,52,6],[66,15,52,13],[66,19,52,17],[67,6,53,4],[68,6,55,4],[68,12,55,10,"pickedImage"],[68,23,55,21],[68,26,55,24,"result"],[68,32,55,30],[68,33,55,31,"assets"],[68,39,55,37],[68,40,55,38],[68,41,55,39],[68,42,55,40],[70,6,57,4],[71,6,58,4],[71,12,58,10,"manipulatedImage"],[71,28,58,26],[71,31,58,29],[71,37,58,35,"compressImage"],[71,50,58,48],[71,51,58,49,"pickedImage"],[71,62,58,60],[71,63,58,61,"uri"],[71,66,58,64],[71,68,58,66],[72,8,59,6,"maxWidth"],[72,16,59,14],[73,8,60,6,"maxHeight"],[73,17,60,15],[74,8,61,6,"compress"],[75,6,62,4],[75,7,62,5],[75,8,62,6],[76,6,64,4],[76,13,64,11,"manipulatedImage"],[76,29,64,27],[77,4,65,2],[77,5,65,3],[77,6,65,4],[77,13,65,11,"error"],[77,18,65,16],[77,20,65,18],[78,6,66,4,"console"],[78,13,66,11],[78,14,66,12,"error"],[78,19,66,17],[78,20,66,18],[78,42,66,40],[78,44,66,42,"error"],[78,49,66,47],[78,50,66,48],[79,6,67,4,"Alert"],[79,11,67,9],[79,12,67,9,"default"],[79,19,67,9],[79,20,67,10,"alert"],[79,25,67,15],[79,26,67,16],[79,31,67,21],[79,33,67,23],[79,55,67,45],[79,56,67,46],[80,6,68,4],[80,13,68,11],[80,17,68,15],[81,4,69,2],[82,2,70,0],[84,2,72,0],[85,0,73,0],[86,0,74,0],[87,2,75,7],[87,17,75,22,"compressImage"],[87,30,75,35,"compressImage"],[87,31,76,2,"uri"],[87,34,76,13],[87,36,77,2,"options"],[87,43,82,3],[87,46,82,6],[87,47,82,7],[87,48,82,8],[87,50,83,28],[88,4,84,2],[88,10,84,8],[89,6,85,4,"maxWidth"],[89,14,85,12],[89,17,85,15],[89,20,85,18],[90,6,86,4,"maxHeight"],[90,15,86,13],[90,18,86,16],[90,21,86,19],[91,6,87,4,"compress"],[91,14,87,12],[91,17,87,15],[91,20,87,18],[92,6,88,4,"format"],[92,12,88,10],[92,15,88,13,"ImageManipulator"],[92,31,88,29],[92,32,88,30,"SaveFormat"],[92,42,88,40],[92,43,88,41,"JPEG"],[93,4,89,2],[93,5,89,3],[93,8,89,6,"options"],[93,15,89,13],[94,4,91,2],[94,8,91,6],[95,6,92,4],[96,6,93,4],[96,12,93,10,"actions"],[96,19,93,44],[96,22,93,47],[96,24,93,49],[98,6,95,4],[99,6,96,4,"actions"],[99,13,96,11],[99,14,96,12,"push"],[99,18,96,16],[99,19,96,17],[100,8,97,6,"resize"],[100,14,97,12],[100,16,97,14],[101,10,98,8,"width"],[101,15,98,13],[101,17,98,15,"maxWidth"],[101,25,98,23],[102,10,99,8,"height"],[102,16,99,14],[102,18,99,16,"maxHeight"],[103,8,100,6],[104,6,101,4],[104,7,101,5],[104,8,101,6],[105,6,103,4],[105,12,103,10,"manipulatedImage"],[105,28,103,26],[105,31,103,29],[105,37,103,35,"ImageManipulator"],[105,53,103,51],[105,54,103,52,"manipulateAsync"],[105,69,103,67],[105,70,104,6,"uri"],[105,73,104,9],[105,75,105,6,"actions"],[105,82,105,13],[105,84,106,6],[106,8,107,8,"compress"],[106,16,107,16],[107,8,108,8,"format"],[107,14,108,14],[108,8,109,8,"base64"],[108,14,109,14],[108,16,109,16],[109,6,110,6],[109,7,111,4],[109,8,111,5],[110,6,113,4],[110,13,113,11],[111,8,114,6,"uri"],[111,11,114,9],[111,13,114,11,"manipulatedImage"],[111,29,114,27],[111,30,114,28,"uri"],[111,33,114,31],[112,8,115,6,"width"],[112,13,115,11],[112,15,115,13,"manipulatedImage"],[112,31,115,29],[112,32,115,30,"width"],[112,37,115,35],[113,8,116,6,"height"],[113,14,116,12],[113,16,116,14,"manipulatedImage"],[113,32,116,30],[113,33,116,31,"height"],[114,6,117,4],[114,7,117,5],[115,4,118,2],[115,5,118,3],[115,6,118,4],[115,13,118,11,"error"],[115,18,118,16],[115,20,118,18],[116,6,119,4,"console"],[116,13,119,11],[116,14,119,12,"error"],[116,19,119,17],[116,20,119,18],[116,46,119,44],[116,48,119,46,"error"],[116,53,119,51],[116,54,119,52],[117,6,120,4],[118,6,121,4],[118,13,121,11],[119,8,121,13,"uri"],[119,11,121,16],[120,8,121,18,"width"],[120,13,121,23],[120,15,121,25],[120,16,121,26],[121,8,121,28,"height"],[121,14,121,34],[121,16,121,36],[122,6,121,38],[122,7,121,39],[123,4,122,2],[124,2,123,0],[126,2,125,0],[127,0,126,0],[128,0,127,0],[129,2,128,7],[129,17,128,22,"pickMenuItemImage"],[129,34,128,39,"pickMenuItemImage"],[129,35,128,39],[129,37,128,66],[130,4,129,2],[130,10,129,8,"result"],[130,16,129,14],[130,19,129,17],[130,25,129,23,"pickAndCompressImage"],[130,45,129,43],[130,46,129,44],[131,6,130,4,"aspect"],[131,12,130,10],[131,14,130,12],[131,15,130,13],[131,16,130,14],[131,18,130,16],[131,19,130,17],[131,20,130,18],[132,6,131,4,"maxWidth"],[132,14,131,12],[132,16,131,14],[132,19,131,17],[133,6,132,4,"maxHeight"],[133,15,132,13],[133,17,132,15],[133,20,132,18],[134,6,133,4,"compress"],[134,14,133,12],[134,16,133,14],[135,4,134,2],[135,5,134,3],[135,6,134,4],[136,4,136,2],[136,11,136,9,"result"],[136,17,136,15],[136,19,136,17,"uri"],[136,22,136,20],[136,26,136,24],[136,30,136,28],[137,2,137,0],[139,2,139,0],[140,0,140,0],[141,0,141,0],[142,2,142,7],[142,17,142,22,"pickRestaurantImage"],[142,36,142,41,"pickRestaurantImage"],[142,37,142,41],[142,39,142,68],[143,4,143,2],[143,10,143,8,"result"],[143,16,143,14],[143,19,143,17],[143,25,143,23,"pickAndCompressImage"],[143,45,143,43],[143,46,143,44],[144,6,144,4,"aspect"],[144,12,144,10],[144,14,144,12],[144,15,144,13],[144,17,144,15],[144,19,144,17],[144,20,144,18],[144,21,144,19],[145,6,145,4,"maxWidth"],[145,14,145,12],[145,16,145,14],[145,20,145,18],[146,6,146,4,"maxHeight"],[146,15,146,13],[146,17,146,15],[146,20,146,18],[147,6,147,4,"compress"],[147,14,147,12],[147,16,147,14],[148,4,148,2],[148,5,148,3],[148,6,148,4],[149,4,150,2],[149,11,150,9,"result"],[149,17,150,15],[149,19,150,17,"uri"],[149,22,150,20],[149,26,150,24],[149,30,150,28],[150,2,151,0],[152,2,153,0],[153,0,154,0],[154,0,155,0],[155,2,156,7],[155,11,156,16,"getBase64Size"],[155,24,156,29,"getBase64Size"],[155,25,156,30,"base64"],[155,31,156,44],[155,33,156,54],[156,4,157,2],[157,4,158,2],[157,10,158,8,"base64Data"],[157,20,158,18],[157,23,158,21,"base64"],[157,29,158,27],[157,30,158,28,"replace"],[157,37,158,35],[157,38,158,36],[157,64,158,62],[157,66,158,64],[157,68,158,66],[157,69,158,67],[158,4,159,2],[159,4,160,2],[159,10,160,8,"sizeInBytes"],[159,21,160,19],[159,24,160,23,"base64Data"],[159,34,160,33],[159,35,160,34,"length"],[159,41,160,40],[159,44,160,43],[159,45,160,44],[159,48,160,48],[159,49,160,49],[160,4,161,2],[160,11,161,9,"sizeInBytes"],[160,22,161,20],[161,2,162,0],[163,2,164,0],[164,0,165,0],[165,0,166,0],[166,2,167,7],[166,11,167,16,"formatFileSize"],[166,25,167,30,"formatFileSize"],[166,26,167,31,"bytes"],[166,31,167,44],[166,33,167,54],[167,4,168,2],[167,8,168,6,"bytes"],[167,13,168,11],[167,16,168,14],[167,20,168,18],[167,22,168,20],[168,6,169,4],[168,13,169,11],[168,16,169,14,"bytes"],[168,21,169,19],[168,25,169,23],[169,4,170,2],[169,5,170,3],[169,11,170,9],[169,15,170,13,"bytes"],[169,20,170,18],[169,23,170,21],[169,27,170,25],[169,30,170,28],[169,34,170,32],[169,36,170,34],[170,6,171,4],[170,13,171,11],[170,16,171,14],[170,17,171,15,"bytes"],[170,22,171,20],[170,25,171,23],[170,29,171,27],[170,31,171,29,"toFixed"],[170,38,171,36],[170,39,171,37],[170,40,171,38],[170,41,171,39],[170,46,171,44],[171,4,172,2],[171,5,172,3],[171,11,172,9],[172,6,173,4],[172,13,173,11],[172,16,173,14],[172,17,173,15,"bytes"],[172,22,173,20],[172,26,173,24],[172,30,173,28],[172,33,173,31],[172,37,173,35],[172,38,173,36],[172,40,173,38,"toFixed"],[172,47,173,45],[172,48,173,46],[172,49,173,47],[172,50,173,48],[172,55,173,53],[173,4,174,2],[174,2,175,0],[175,0,175,1],[175,3]],"functionMap":{"names":["<global>","pickAndCompressImage","compressImage","pickMenuItemImage","pickRestaurantImage","getBase64Size","formatFileSize"],"mappings":"AAA;OCsB;CD+C;OEK;CFgD;OGK;CHS;OIK;CJS;OKK;CLM;OMK;CNQ"},"hasCjsExports":false},"type":"js/module"}]}